var imgs = document.body.querySelectorAll('img'),    //获取所有图片  
    H = window.innerHeight;     //浏览器高度
window.onload = window.onscroll = function(){  
    var S = document.documentElement.scrollTop||document.body.scrollTop;   //滚动条滚过高度
    [].forEach.call(imgs,function(img){
         if(!img.getAttribute('data-src')){return}
         if(H + S + 200 > getTop(img)){
// getTop(img)获取图片距                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         离页面顶部高度，H+S+200让图片提前加载。
             img.src=img.getAttribute("data-src");
             img.removeAttribute("data-src");
         }
        })
}

function getTop(e){     //获取元素距离顶部高度方法。  
    var T = e.offsetTop;
    while(e = e.offsetParent ){
        T += e.offsetTop
}
    return T
}